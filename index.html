<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Hospital Management System</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>
<body class="p-4">

<!-- LOGIN -->
<div id="loginPage">
  <h2>Login Admin</h2>
  <input id="username" class="form-control mb-2" placeholder="admin">
  <input id="password" type="password" class="form-control mb-2" placeholder="admin">
  <button class="btn btn-primary" onclick="login()">Login</button>
  <p id="loginError" class="text-danger"></p>
</div>

<!-- APP -->
<div id="appPage" class="d-none">

  <ul class="nav nav-tabs mb-4">
  <li class="nav-item"><button class="nav-link active" onclick="show('dashboard')">Dashboard</button></li>
  <li class="nav-item"><button class="nav-link" onclick="show('patients')">Patients</button></li>
  <li class="nav-item"><button class="nav-link" onclick="show('doctors')">Médecins</button></li>
  <li class="nav-item"><button class="nav-link" onclick="show('appointments')">Rendez-vous</button></li>
  <li class="nav-item"><button class="nav-link" onclick="show('prescriptions')">Prescriptions</button></li>
<li class="nav-item"><button class="nav-link" onclick="show('services')">Services</button></li>

  <li class="nav-item ms-auto"><button class="btn btn-danger" onclick="logout()">Logout</button></li>
</ul>
<!-- DASHBOARD -->
<div id="dashboard">
  <div class="row mb-4">
    <div class="col-md-4"><div class="alert alert-primary">Patients: <b id="statPatients">0</b></div></div>
    <div class="col-md-4"><div class="alert alert-success">Médecins: <b id="statDoctors">0</b></div></div>
    <div class="col-md-4"><div class="alert alert-warning">Rendez-vous: <b id="statAppointments">0</b></div></div>
  </div>

  <div class="row">
    <div class="col-md-6"><canvas id="patientsByService"></canvas></div>
    <div class="col-md-6"><canvas id="doctorsBySpecialty"></canvas></div>
    <div class="col-md-6 mt-4"><canvas id="appointmentsByDay"></canvas></div>
    <div class="col-md-6 mt-4"><canvas id="appointmentsByDoctor"></canvas></div>
    <div class="col-md-12 mt-4"><canvas id="ageDistribution"></canvas></div>
  </div>
</div>


  <!-- PATIENTS -->
  <div id="patients">
    <h3>Patients</h3>
    <form onsubmit="savePatient(event)" class="row g-2 mb-3">
      <input type="hidden" id="patientId">
      <input id="pName" class="form-control col" placeholder="Nom">
      <input id="pAge" type="number" class="form-control col" placeholder="Âge">
      <input id="pService" class="form-control col" placeholder="Service">
      <button class="btn btn-success col">Save</button>
    </form>
    <table class="table"><tbody id="patientsTable"></tbody></table>
    <button class="btn btn-outline-success mb-2" onclick="exportPatientsCSV()">
  Export Patients CSV
</button>

  </div>

  <!-- DOCTORS -->
  <div id="doctors" class="d-none">
    <h3>Médecins</h3>
    <form onsubmit="saveDoctor(event)" class="row g-2 mb-3">
      <input type="hidden" id="doctorId">
      <input id="dName" class="form-control col" placeholder="Nom">
      <input id="dSpec" class="form-control col" placeholder="Spécialité">
      <button class="btn btn-success col">Save</button>
    </form>
    <table class="table"><tbody id="doctorsTable"></tbody></table>
  </div>

  <!-- APPOINTMENTS -->
  <div id="appointments" class="d-none">
    <h3>Rendez-vous</h3>
    <form onsubmit="saveAppointment(event)" class="row g-2 mb-3">
      <select id="aPatient" class="form-control col"></select>
      <select id="aDoctor" class="form-control col"></select>
      <input id="aDate" type="date" class="form-control col">
      <input id="aTime" type="time" class="form-control col">
      <button class="btn btn-success col">Save</button>
    </form>
    <table class="table"><tbody id="appointmentsTable"></tbody></table>
    <button class="btn btn-outline-danger mb-2" onclick="exportAppointmentsPDF()">
  Export Rendez-vous PDF
</button>

  </div>

</div>
<!-- PRESCRIPTIONS -->
<div id="prescriptions" class="d-none">
  <h3>Prescriptions</h3>
  <form onsubmit="savePrescription(event)" class="row g-2 mb-3">
    <select id="prPatient" class="form-control col"></select>
    <select id="prDoctor" class="form-control col"></select>
    <input id="prMeds" class="form-control col" placeholder="Médicaments">
    <input id="prDate" type="date" class="form-control col">
    <button class="btn btn-success col">Save</button>
  </form>
  <table class="table"><tbody id="prescriptionsTable"></tbody></table>
</div>

<!-- SERVICES -->
<div id="services" class="d-none">
  <h3>Services</h3>
  <form onsubmit="saveService(event)" class="row g-2 mb-3">
    <input id="sName" class="form-control col" placeholder="Nom du service">
    <input id="sBeds" type="number" class="form-control col" placeholder="Lits">
    <button class="btn btn-success col">Save</button>
  </form>
  <table class="table"><tbody id="servicesTable"></tbody></table>
</div>


<script src="js/app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</body>
</html>
